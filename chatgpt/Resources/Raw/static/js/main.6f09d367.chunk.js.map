{"version":3,"sources":["services/api.js","context/room/Room.context.jsx","ui/pages/home/Home.page.jsx","static/logo192.png","static/logo.png","ui/pages/room/Room.page.jsx","routes/index.jsx","App.jsx","index.jsx"],"names":["CsharpMethod","command","data","this","RequestPrefix","ResponsePrefix","dataId","Date","getTime","JSON","stringify","key","localStorage","setItem","utf8_to_b64","eventKey","replace","that","promise","Promise","resolve","reject","window","addEventListener","eventHandler","e","removeEventListener","resp","newValue","realData","b64_to_utf8","startsWith","substr","location","str","btoa","unescape","encodeURIComponent","decodeURIComponent","escape","atob","RoomContext","createContext","RoomProvider","children","useState","messageHistory","setMessageHistory","isConnected","setIsConnected","signedUser","setSignedUser","signedRoom","setSignedRoom","usersList","setUserList","onMessageHandler","useCallback","event","console","log","message","username","time","format","number","length","newMessageHistory","roomProps","handleSendMessage","type","navigator","userAgent","indexOf","msg","call","then","catch","err","alert","handleConnect","room","agent","a","ApiKey","Temperature","MaxTokens","Provider","value","Home","useContext","setUsername","setRoom","setAgent","handleOnChange","target","id","className","onSubmit","preventDefault","src","alt","onChange","rows","cols","autoFocus","placeholder","disabled","style","height","size","onClick","Room","setMessage","innerWidth","showUsers","setShowMenu","messageInputRef","useRef","messageListRef","useEffect","current","scrollTop","scrollHeight","handleResize","handleMessageInputKeyDown","ctrlKey","focus","MessageItem","item","messageItemClass","messageBoxClass","emojiSupport","name","emoji","getUnicode","components","p","node","props","toString","logo","map","index","state","ref","onKeyDown","title","Routes","actualComponent","path","exact","component","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6f09d367.chunk.js","sourcesContent":["\n// 调用csharp的方法\nexport default class CsharpMethod {\n  constructor(command, data) {\n    this.RequestPrefix = \"request_csharp_\";\n    this.ResponsePrefix = \"response_csharp_\";\n    // 唯一\n    this.dataId = this.RequestPrefix + new Date().getTime();\n    // 调用csharp的命令\n    this.command = command;\n    // 参数\n    this.data = { command: command, data: !data ? '' : JSON.stringify(data), key: this.dataId }\n  }\n\n  // 调用csharp 返回promise\n  call() {\n    // 把data存储到localstorage中 目的是让csharp端获取参数\n    localStorage.setItem(this.dataId, this.utf8_to_b64(JSON.stringify(this.data)));\n    let eventKey = this.dataId.replace(this.RequestPrefix, this.ResponsePrefix);\n    let that = this;\n    var promise = new Promise(function (resolve, reject) {\n      var eventHandler = function (e) {\n        window.removeEventListener(eventKey, eventHandler);\n        let resp = e.newValue;\n        if (resp) {\n          // 从base64转换\n          let realData = that.b64_to_utf8(resp);\n          if (realData.startsWith('err:')) {\n            reject(realData.substr(4));\n          } else {\n            resolve(realData);\n          }\n        } else {\n          reject(\"unknow error ： \" + eventKey);\n        }\n      }\n      // 注册监听回调\n      window.addEventListener(eventKey, eventHandler);\n    });\n    // 改变location 发送给csharp端\n    window.location = \"/api/\" + this.dataId;\n    return promise;\n  }\n\n  // 转成base64 解决中文乱码\n  utf8_to_b64(str) {\n    return window.btoa(unescape(encodeURIComponent(str)));\n  }\n  // 从base64转过来 解决中文乱码\n  b64_to_utf8(str) {\n    return decodeURIComponent(escape(window.atob(str)));\n  }\n\n}\n","import { createContext, useState, useCallback } from 'react';\nimport { format } from 'date-fns';\nimport CsharpMethod from '../../services/api'\nexport const RoomContext = createContext({});\n\n\nexport const RoomProvider = ({ children }) => {\n  let [messageHistory, setMessageHistory] = useState([]);\n  const [isConnected, setIsConnected] = useState(false);\n  const [signedUser, setSignedUser] = useState('');\n  const [signedRoom, setSignedRoom] = useState('');\n  const [usersList, setUserList] = useState([]);\n\n  // Checks if username is available and if connection is ready on server\n  // const canConnect = useCallback(async ({ username, room }) => {\n  //   try {\n  //     const response = await api.get(`/get_signed_user/${room}/${username}`);\n  //     const { user_exists } = response.data;\n  //     return !!user_exists;\n  //   } catch (error) {\n  //     console.log(error.message)\n  //     return false;\n  //   }\n  // }, []);\n\n  // Handler for new data coming from the server\n  const onMessageHandler = useCallback((event) => {\n    console.log(event)\n    const { data } = event;\n    const { message, username } = event;\n    const time = format(new Date(), 'MM/dd/yyyy HH:mm');\n    const number = messageHistory.length;\n    const newMessageHistory = [...messageHistory, { message, username, time, number }];\n    messageHistory = newMessageHistory;\n\n    setMessageHistory(newMessageHistory);\n  }, [messageHistory])\n\n  // Connect to the websocket server\n  // const { readyState, sendJsonMessage } = useWebSocket(`${SOCKET_URL}/${signedRoom}/${signedUser}`, {\n  //   onMessage: onMessageHandler\n  // }, isConnected);\n\n  // const connectionStatus = {\n  //   [ReadyState.CONNECTING]: 'Connecting',\n  //   [ReadyState.OPEN]: 'Open',\n  //   [ReadyState.CLOSING]: 'Closing',\n  //   [ReadyState.CLOSED]: 'Closed',\n  //   [ReadyState.UNINSTANTIATED]: 'Uninstantiated',\n  // }[readyState];\n\n  // Handler that sends messages to the server\n  const handleSendMessage = useCallback((message) => {\n    console.log(message);\n    // if (message.length > 0 && isConnected) {\n    onMessageHandler({\n        message: message,\n        username: '我',\n        type: 'chat_message'\n      });\n\n    if (navigator.userAgent.indexOf('Edg/')>-1) {\n      const method = new CsharpMethod(\"chat\", {msg: message});\n      method.call()\n        .then(function (data) {\n          onMessageHandler({\n            message: data,\n            username: 'Robot',\n            type: 'chat_message'\n          });\n        }).catch(function (err) {\n        alert(err);\n      });\n    }\n\n    // }\n  }, [isConnected])\n\n  // Handler to keep states in case connection was successfully\n  const handleConnect = useCallback(async (username, room,agent) => {\n    let data = {ApiKey:username,Temperature:room,MaxTokens:agent };\n    console.log(data);\n    try {\n      if (navigator.userAgent.indexOf('Edg/')>-1){\n        const method = new CsharpMethod(\"chatinit\", data);\n        method.call()\n          .then(function (data) {\n            onMessageHandler({\n              message: data,\n              username: 'Robot',\n              type: 'chat_message'\n            });\n          }).catch(function (err) {\n          console.log(err);\n        });\n      }\n    }\n    catch (e){\n\n    }\n\n    setSignedUser('yuzd');\n    setSignedRoom('room');\n    setIsConnected(true);\n    setUserList([{username:\"yuzd\"}]);\n    // if (!isConnected) {\n    //   const isSigned = await canConnect({ username, room });\n    //   if (!isSigned) {\n    //     setSignedUser(username);\n    //     setSignedRoom(room);\n    //     setIsConnected(true);\n    //   } else {\n    //     alert(\"User is already logged in the room\");\n    //     setIsConnected(false);\n    //     setSignedUser('');\n    //     setSignedRoom('');\n    //     setUserList([]);\n    //   }\n    // } else {\n    //   setIsConnected(false);\n    //   setSignedUser('');\n    //   setSignedRoom('');\n    //   setUserList([]);\n    // }\n\n    setMessageHistory([]);\n\n  }, [isConnected]);\n\n  const roomProps = {\n    handleSendMessage,\n    handleConnect,\n    isConnected,\n    messageHistory,\n    setSignedUser,\n    signedRoom,\n    usersList,\n    signedUser,\n  };\n\n  return (\n    <RoomContext.Provider value={roomProps}>{children}</RoomContext.Provider>\n  );\n};\n","import { RoomContext } from '../../../context';\nimport React, { useState, useCallback, useContext } from 'react';\nimport { FiLogIn } from 'react-icons/fi';\nimport logo from '../../../static/logo192.png';\n\nimport './styles.css';\n\nexport function Home() {\n  const { isConnected, handleConnect } = useContext(RoomContext);\n  const [username, setUsername] = useState('');\n  const [room, setRoom] = useState('0.6');\n  const [agent, setAgent] = useState('500');\n\n  const handleOnChange = useCallback((e) => {\n    switch (e.target.id) {\n      case 'chat-username-input':\n        setUsername(e.target.value);\n        break;\n\n      case 'chat-room-input':\n        setRoom(e.target.value);\n        break;\n\n      case 'chat-agent-input':\n        setAgent(e.target.value);\n        break;\n\n      default:\n        break;\n    }\n  }, []);\n\n  return (\n    <div className=\"main\">\n      <form onSubmit={(e) => { e.preventDefault() }} >\n        <img src={logo} alt=\"logo\" className=\"logo-home\" />\n        <textarea\n          onChange={handleOnChange}\n          value={username}\n          id=\"chat-username-input\"\n          rows=\"10\"\n          cols=\"10\"\n          autoFocus\n          placeholder=\"OPENAI_API_KEY\"\n          disabled={isConnected}\n          className=\"fields\"\n          style={{height:'100px'}}\n        />\n        <input\n          onChange={handleOnChange}\n          value={room}\n          type=\"text\"\n          id=\"chat-room-input\"\n          size=\"39\"\n          placeholder=\"Temperature\"\n          disabled={isConnected}\n          className=\"fields\"\n        />\n        <input\n          onChange={handleOnChange}\n          value={agent}\n          type=\"text\"\n          id=\"chat-agent-input\"\n          size=\"39\"\n          placeholder=\"MaxTokens\"\n          disabled={isConnected}\n          className=\"fields\"\n        />\n        <button\n          type=\"submit\"\n          value=\"\"\n          id=\"chat-connect\"\n          onClick={() => { handleConnect(username, room,agent) }}\n          disabled={username.length === 0}\n          className=\"enter-room-button\"\n        >\n          <span>Enter ChatGPT</span>\n          <FiLogIn className=\"logout-icon\" size={20} />\n        </button>\n      </form>\n\n    </div>\n  );\n}\n","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/logo.481e57ae.png\";","import React, { useCallback, useState, useRef, useContext, useEffect } from 'react';\nimport ReactMarkdown from 'react-markdown'\nimport { FiLogOut, FiSend, FiMenu } from 'react-icons/fi';\nimport emoji from 'emoji-dictionary';\n\nimport { RoomContext } from '../../../context';\nimport logo from '../../../static/logo.png';\n\n\nimport './styles.css';\n\nexport function Room() {\n  const [message, setMessage] = useState('');\n  const [showUsers, setShowMenu] = useState(window.innerWidth >= 600);\n  const {\n    isConnected,\n    handleSendMessage,\n    messageHistory,\n    handleConnect,\n    signedRoom,\n    usersList,\n    signedUser,\n  } = useContext(RoomContext);\n  const messageInputRef = useRef(null);\n  const messageListRef = useRef(null);\n\n  useEffect(() => {\n    console.log('useEffect');\n    if (messageListRef.current) {\n      messageListRef.current.scrollTop = messageListRef.current.scrollHeight;\n    }\n  }, [messageHistory]);\n\n  useEffect(() => {\n    const handleResize = () => {\n      const { innerWidth } = window;\n      setShowMenu(innerWidth >= 600);\n    }\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  const handleOnChange = useCallback((e) => {\n    setMessage(e.target.value);\n  }, [setMessage]);\n\n  const handleMessageInputKeyDown = useCallback((e) => {\n    if (e.key === 'Enter' && e.ctrlKey) {\n      handleSendMessage(message);\n      messageInputRef.current.focus();\n    }\n  }, [handleSendMessage, message])\n\n  const MessageItem = useCallback(({ item }) => {\n    const messageItemClass = item.username === '我' ? \"message-item right\" : \"message-item\";\n    const messageBoxClass = item.username === '我' ? \"message-box me\" : \"message-box\";\n    const emojiSupport = item.message.replace(/:\\w+:/gi, name => emoji.getUnicode(name));\n    return (\n      <li className={messageItemClass} key={item.number.toString()}>\n        <strong>{item.username}</strong>\n        <div className={messageBoxClass}>\n          <ReactMarkdown\n            className=\"markdown-container\"\n            components={{\n              p: ({ node, ...props }) =>\n                <p className=\"md-content\" {...props} />\n            }} >\n            {emojiSupport !== 'undefined' ? emojiSupport : item.message || ''}\n          </ReactMarkdown>\n          <p className=\"message-time\">{item.time}</p>\n        </div>\n      </li>\n    );\n  }, [signedUser]);\n\n  return (\n    <div className=\"chat-room-container\">\n      <div className=\"chat-room-header-container\">\n        <div className=\"signed-room-div\">\n          <img src={logo} alt=\"logo\" className=\"logo-room\" />\n        </div>\n        <div className=\"leave-room-div\">\n\n        </div>\n      </div>\n      <div className=\"message-container\">\n        <div className={showUsers ? 'users-list-container' : 'hide-menu'}>\n          <ul className=\"layout-list\">\n            {usersList.map((item, index) => (\n              <li className=\"username-list-item\" key={index.toString()}>{item.username}</li>\n            ))}\n          </ul>\n        </div>\n        <div className={showUsers ? \"message-list-container\" : \"message-list-container expand-message-list-container\"}>\n          <div className=\"message-list-container-header\" >\n            <button onClick={() => { setShowMenu(state => !state) }} >\n              <FiMenu className=\"menu-icon\" size={20} />\n            </button>\n          </div>\n          <ul className=\"layout-list\" id=\"messages-container\" ref={messageListRef} >\n            {messageHistory.map((item) => <MessageItem item={item} />)}\n          </ul>\n        </div>\n      </div>\n      <div className=\"chat-room-bottom-container\" onChange={(e) => { e.preventDefault() }} >\n        <div className=\"chat-room-message-container\">\n          <textarea\n            ref={messageInputRef}\n            onChange={handleOnChange}\n            value={message}\n            id=\"chat-message-input\"\n            placeholder=\"Type a message [Ctrl+Enter]\"\n            onKeyDown={handleMessageInputKeyDown}\n            className=\"chat-room-message-input\"\n          />\n        </div>\n        <div className=\"chat-room-send-button-container\">\n          <button\n            type=\"button\"\n            value=\"\"\n            id=\"chat-message-submit\"\n            title=\"Press Ctrl+Enter to send\"\n            onClick={() => {\n              handleSendMessage(message);\n              setMessage('');\n              messageInputRef.current.focus();\n            }}\n            disabled={!isConnected}\n            className=\"send-message-button\"\n          >\n            <FiSend className=\"send-icon\" size={20} />\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useContext } from 'react';\nimport { Switch, Route } from 'react-router-dom';\n\nimport { RoomContext } from '../context';\nimport { Home } from '../ui/pages';\nimport { Room } from '../ui/pages';\n\nconst Routes = () => {\n  const { isConnected } = useContext(RoomContext);\n\n  const actualComponent = !isConnected\n    ? Home\n    : Room\n\n  return (\n    <Switch>\n      <Route path=\"/index.html\" exact component={actualComponent} />\n    </Switch>\n  );\n};\n\nexport default Routes;\n","import { HashRouter as Router } from 'react-router-dom';\n\nimport { RoomProvider } from './context';\nimport Routes from './routes';\nimport './styles.css';\n\nconst App = () => {\n  return (\n    <Router>\n      <RoomProvider>\n        <Routes />\n      </RoomProvider>\n    </Router>\n  );\n};\n\nexport default App;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n"],"sourceRoot":""}